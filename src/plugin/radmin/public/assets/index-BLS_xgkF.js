import{e as H,u as Te,S as ne,J as ie,K as xe,_ as z,x as ve,n as q,h as X,l as ye,M as Se,i as re,N as et,z as Ue,L as oe,O as tt,P as ot,w as Oe,Q as Ie,f as Le,R as we,r as We,B as Fe,T as lt,g as nt,U as Ke,V as at,W as st}from"./index-D_nuE6M8.js";import{u as Be,t as F}from"./terminal-CNqIwQ-w.js";import{e as I,h as R,o as i,T as $,N as x,s as e,j as ae,U as w,m as p,_ as E,a7 as j,X as W,W as se,O as a,l,k as f,H as rt,a as K,f as Me,z as J,$ as ce,M as le,n as Y,B as ze,aa as Re,Z as O,ab as je,ac as ut,p as pe,a0 as Xe,a5 as ue,V as A,ad as it,Y as De,ae as Pe,af as ct,ag as Ve,ah as Ye,a9 as dt,A as mt,ai as ft,i as Ne}from"./vue-DTj65VEW.js";import{_ as pt,D as _t}from"./darkSwitch-DJkO2AzH.js";import{c as vt,g as ee,o as Ee,a as $e,r as _e,s as yt,b as gt}from"./router-BZUJl1Vd.js";import{I as bt}from"./index-WSi79vNW.js";import{t as ht}from"./useDark-BepbUwhI.js";import{a as Ct,i as kt}from"./index-BwvoFoZH.js";import{F as fe}from"./index-Cxc02btj.js";import"./index-CGti_7Vw.js";const wt={class:"layout-logo"},xt={key:0,class:"logo-img",src:pt,alt:"logo"},Tt=I({__name:"logo",setup(T){j(c=>({adf9ae48:e(t).layout.layoutMode!="Streamline"?e(t).getColorVal("menuTopBarBackground"):"transparent"}));const t=H(),o=Te(),u=function(){t.layout.shrink&&!t.layout.menuCollapse&&vt(),t.setLayout("menuCollapse",!t.layout.menuCollapse),ne.set(ie,{layoutMode:t.layout.layoutMode,menuCollapse:t.layout.menuCollapse}),setTimeout(()=>{xe()},350)};return(c,s)=>{const g=p("Icon");return i(),R("div",wt,[e(t).layout.menuCollapse?$("",!0):(i(),R("img",xt)),e(t).layout.menuCollapse?$("",!0):(i(),R("div",{key:1,style:ae({color:e(t).getColorVal("menuActiveColor")}),class:"website-name"},w(e(o).siteName),5)),e(t).layout.layoutMode!="Streamline"?(i(),x(g,{key:2,onClick:u,name:e(t).layout.menuCollapse?"fa fa-indent":"fa fa-dedent",class:E([e(t).layout.menuCollapse?"unfold":"","fold"]),color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["name","class","color"])):$("",!0)])}}}),Je=z(Tt,[["__scopeId","data-v-38fd2478"]]),St=I({__name:"menuTree",props:{menus:{default:()=>[]},extends:{default:()=>({level:1})}},setup(T){j(s=>({"3a8d44ae":e(o).getColorVal("menuActiveBackground")}));const{t}=ve.useI18n(),o=H(),u=T,c=s=>{var g,d;if(((g=u.extends)==null?void 0:g.position)=="horizontal"&&u.extends.level<=1&&((d=s.children)!=null&&d.length)){const r=$e(s.children);r?Ee(r):rt({type:"error",message:t("utils.No child menu to jump to!")})}};return(s,g)=>{const d=p("Icon"),r=p("menu-tree",!0),v=p("el-sub-menu"),y=p("el-menu-item");return i(!0),R(W,null,se(u.menus,m=>(i(),R(W,null,[m.children&&m.children.length>0?(i(),x(v,{onClick:n=>c(m),index:e(ee)(m),key:e(ee)(m)},{title:a(()=>{var n,b,M,_;return[l(d,{color:e(o).getColorVal("menuColor"),name:(n=m.meta)!=null&&n.icon?(b=m.meta)==null?void 0:b.icon:e(o).layout.menuDefaultIcon},null,8,["color","name"]),f("span",null,w((M=m.meta)!=null&&M.title?(_=m.meta)==null?void 0:_.title:s.$t("noTitle")),1)]}),default:a(()=>[l(r,{extends:{...u.extends,level:u.extends.level+1},menus:m.children},null,8,["extends","menus"])]),_:2},1032,["onClick","index"])):(i(),x(y,{onClick:n=>e(Ee)(m),index:e(ee)(m),key:e(ee)(m)},{default:a(()=>{var n,b,M,_;return[l(d,{color:e(o).getColorVal("menuColor"),name:(n=m.meta)!=null&&n.icon?(b=m.meta)==null?void 0:b.icon:e(o).layout.menuDefaultIcon},null,8,["color","name"]),f("span",null,w((M=m.meta)!=null&&M.title?(_=m.meta)==null?void 0:_.title:s.$t("noTitle")),1)]}),_:2},1032,["onClick","index"]))],64))),256)}}}),ge=z(St,[["__scopeId","data-v-cddda623"]]),Bt=I({__name:"menuVertical",setup(T){j(r=>({"76d2e33a":s.value,"4a79107e":e(t).getColorVal("menuBackground"),"64c0459e":e(t).getColorVal("menuColor"),"3e529690":e(t).getColorVal("menuActiveColor")}));const t=H(),o=q(),u=le(),c=K({defaultActive:""}),s=Me(()=>{let r=0;return t.layout.menuShowTopBar&&(r=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+r)+"px)":"calc(100vh - "+r+"px)"}),g=r=>{const v=o.getTabsViewDataByRoute(r);v&&(c.defaultActive=ee(v,v.meta.matched))},d=()=>{Y(()=>{var v;let r=document.querySelector(".el-menu.layouts-menu-vertical li.is-active");if(!r)return!1;(v=X.value)==null||v.setScrollTop(r.offsetTop)})};return J(()=>{g(u),d()}),ce(r=>{g(r)}),(r,v)=>{const y=p("el-menu"),m=p("el-scrollbar");return i(),x(m,{ref_key:"layoutMenuScrollbarRef",ref:X,class:"vertical-menus-scrollbar"},{default:a(()=>[l(y,{class:"layouts-menu-vertical","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":c.defaultActive,collapse:e(t).layout.menuCollapse,ref_key:"layoutMenuRef",ref:ye},{default:a(()=>[l(ge,{menus:e(o).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}}),Mt=I({__name:"menuVerticalChildren",setup(T){j(r=>({"20a77cc6":s.value,"6c5bc54d":e(t).getColorVal("menuBackground"),"7f8e9edc":e(t).getColorVal("menuColor"),fb6fcea8:e(t).getColorVal("menuActiveColor")}));const t=H(),o=q(),u=le(),c=K({defaultActive:"",routeChildren:[]}),s=Me(()=>{let r=0;return t.layout.menuShowTopBar&&(r=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+r)+"px)":"calc(100vh - "+r+"px)"}),g=r=>{const v=o.getTabsViewDataByRoute(r);v&&(c.defaultActive=ee(v,v.meta.matched));let y=o.getTabsViewDataByRoute(r,"above");y?y.children&&y.children.length>0?c.routeChildren=y.children:c.routeChildren=[y]:c.routeChildren||(c.routeChildren=o.state.tabsViewRoutes)},d=()=>{Y(()=>{var v;let r=document.querySelector(".el-menu.layouts-menu-vertical-children li.is-active");if(!r)return!1;(v=X.value)==null||v.setScrollTop(r.offsetTop)})};return J(()=>{g(u),d(),new Se(X.value.wrapRef)}),ce(r=>{g(r)}),(r,v)=>{const y=p("el-menu"),m=p("el-scrollbar");return i(),x(m,{ref_key:"layoutMenuScrollbarRef",ref:X,class:"children-vertical-menus-scrollbar"},{default:a(()=>[l(y,{class:"layouts-menu-vertical-children","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":c.defaultActive,collapse:e(t).layout.menuCollapse,ref_key:"layoutMenuRef",ref:ye},{default:a(()=>[c.routeChildren.length>0?(i(),x(ge,{key:0,menus:c.routeChildren},null,8,["menus"])):$("",!0)]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}}),Rt=I({name:"layout/aside",__name:"aside",setup(T){j(c=>({"12d2a223":u.value}));const t=H(),o=q(),u=Me(()=>t.menuWidth());return(c,s)=>{const g=p("el-aside");return e(o).state.tabFullScreen?$("",!0):(i(),x(g,{key:0,class:E("layout-aside-"+e(t).layout.layoutMode+" "+(e(t).layout.shrink?"shrink":""))},{default:a(()=>[e(t).layout.menuShowTopBar?(i(),x(Je,{key:0})):$("",!0),e(t).layout.layoutMode=="Double"?(i(),x(Mt,{key:1})):(i(),x(Bt,{key:2}))]),_:1},8,["class"]))}}}),Ae=z(Rt,[["__scopeId","data-v-be977e32"]]);function Ze(){if(!ze())throw new Error("useCurrentInstance() can only be used inside setup() or functional components!");const{appContext:T}=ze();return{proxy:T.config.globalProperties}}const Vt={class:"el-dropdown-menu"},$t=["onClick"],At=I({__name:"index",props:{width:{default:150},items:{default:()=>[]}},emits:["menuClick","hideContextmenu"],setup(T,{expose:t,emit:o}){const u=T,c=o,s=K({show:!1,axis:{x:0,y:0},sourceData:null,showArrow:!0,arrowAxis:10}),g=(v,y)=>{s.showArrow=!0,s.sourceData=v;const m=document.documentElement.clientHeight-y.y-(u.items.length*40+20),n=document.documentElement.clientWidth-y.x-(u.width+20);m<0&&(y.y+=m,s.showArrow=!1),n<0&&(y.x+=n,s.showArrow=!1),s.axis=y,s.show=!0},d=()=>{s.show=!1,c("hideContextmenu")},r=v=>{v.disabled||(v.sourceData=ut(s.sourceData),c("menuClick",v))};return t({onShowContextmenu:g,onHideContextmenu:d}),J(()=>{re(document,"click",d),re(document,"scroll",d),re(document,"keydown",v=>{v.key==="Escape"&&d()})}),(v,y)=>{const m=p("Icon");return i(),x(Re,{name:"el-zoom-in-center"},{default:a(()=>[O((i(),R("div",{class:"el-popper is-pure is-light el-dropdown__popper ba-contextmenu",style:ae(`top: ${s.axis.y+5}px;left: ${s.axis.x-14}px;width:${u.width}px`),key:Math.random(),"aria-hidden":"false","data-popper-placement":"bottom"},[f("ul",Vt,[(i(!0),R(W,null,se(u.items,(n,b)=>(i(),R("li",{key:b,class:E(["el-dropdown-menu__item",n.disabled?"is-disabled":""]),tabindex:"-1",onClick:M=>r(n)},[l(m,{size:"12",name:n.icon},null,8,["name"]),f("span",null,w(n.label),1)],10,$t))),128))]),s.showArrow?(i(),R("span",{key:0,class:"el-popper__arrow",style:ae({left:`${s.arrowAxis}px`})},null,4)):$("",!0)],4)),[[je,s.show]])]),_:1})}}}),It=z(At,[["__scopeId","data-v-0380e8de"]]),Lt=["onClick","onContextmenu"],Ft=I({__name:"tabs",setup(T,{expose:t}){j(h=>({"6f2fd06e":e(c).getColorVal("headerBarTabColor"),"6a84faa3":e(c).getColorVal("headerBarTabActiveColor"),"5a2975ba":e(c).layout.layoutMode=="Default"?"none":e(c).getColorVal("headerBarBackground")}));const o=le(),u=Xe(),c=H(),s=q(),{proxy:g}=Ze(),d=pe(),r=et(),v=pe(),y=K({contextmenuItems:[{name:"refresh",label:"重新加载",icon:"fa fa-refresh"},{name:"close",label:"关闭标签",icon:"fa fa-times"},{name:"fullScreen",label:"当前标签全屏",icon:"el-icon-FullScreen"},{name:"closeOther",label:"关闭其他标签",icon:"fa fa-minus"},{name:"closeAll",label:"关闭全部标签",icon:"fa fa-stop"}]}),m=K({width:"0",transform:"translateX(0px)"}),n=h=>{u.push(h.fullPath)},b=function(h){if(!h)return!1;m.width=h.clientWidth+"px",m.transform=`translateX(${h.offsetLeft}px)`;let B=h.offsetLeft+h.clientWidth-d.value.clientWidth;h.offsetLeft<d.value.scrollLeft?d.value.scrollTo(h.offsetLeft,0):B>d.value.scrollLeft&&d.value.scrollTo(B,0)},M=()=>{const h=s.state.tabsView.slice(-1)[0];h?u.push(h.fullPath):u.push(Ue)},_=h=>{var B;s._closeTab(h),g.eventBus.emit("onTabViewClose",h),((B=s.state.activeRoute)==null?void 0:B.fullPath)===h.fullPath?M():(s._setActiveRoute(s.state.activeRoute),Y(()=>{b(r.value[s.state.activeIndex])})),v.value.onHideContextmenu()},V=h=>{var B;s._closeTabs(h),s._setActiveRoute(h),((B=s.state.activeRoute)==null?void 0:B.fullPath)!==o.fullPath&&u.push(h.fullPath)},L=h=>{var S;let B=$e(s.state.tabsViewRoutes);if(h&&B&&B.path==h.fullPath)return V(h);if(B&&B.path==((S=s.state.activeRoute)==null?void 0:S.fullPath))return V(s.state.activeRoute);s._closeTabs(!1),B&&_e(B.path)},G=(h,B)=>{y.contextmenuItems[0].disabled=o.fullPath!==h.fullPath,y.contextmenuItems[4].disabled=y.contextmenuItems[3].disabled=s.state.tabsView.length==1;const{clientX:S,clientY:D}=B;v.value.onShowContextmenu(h,{x:S,y:D})},P=h=>{const{name:B,sourceData:S}=h;if(S)switch(B){case"refresh":g.eventBus.emit("onTabViewRefresh",S);break;case"close":_(S);break;case"closeOther":V(S);break;case"closeAll":L(S);break;case"fullScreen":o.fullPath!==S.fullPath&&u.push(S.fullPath),s.setFullScreen(!0);break}},U=function(h){s._addTab(h),s._setActiveRoute(h),Y(()=>{b(r.value[s.state.activeIndex])})};return ce(async h=>{U(h)}),J(()=>{U(u.currentRoute.value),new Se(d.value)}),t({closeAllTab:L,closeTabByPath:h=>{for(const B in s.state.tabsView)if(s.state.tabsView[B].fullPath==h){_(s.state.tabsView[B]);break}},updateTabTitle:(h,B)=>{s._updateTabTitle(h,B),Y(()=>{b(r.value[s.state.activeIndex])})}}),(h,B)=>{const S=p("Icon");return i(),R("div",{class:"nav-tabs",ref_key:"tabScrollbarRef",ref:d},[(i(!0),R(W,null,se(e(s).state.tabsView,(D,k)=>(i(),R("div",{onClick:C=>n(D),onContextmenu:ue(C=>G(D,C),["prevent"]),class:E(["ba-nav-tab",e(s).state.activeIndex==k?"active":""]),ref_for:!0,ref:e(r).set,key:k},[A(w(D.meta.title)+" ",1),l(Re,{onAfterLeave:B[0]||(B[0]=C=>b(e(r)[e(s).state.activeIndex])),name:"el-fade-in"},{default:a(()=>[O(l(S,{class:"close-icon",onClick:ue(C=>_(D),["stop"]),size:"15",name:"el-icon-Close"},null,8,["onClick"]),[[je,e(s).state.tabsView.length>1]])]),_:2},1024)],42,Lt))),128)),f("div",{style:ae(m),class:"nav-tabs-active-box"},null,4),l(It,{ref_key:"contextmenuRef",ref:v,items:y.contextmenuItems,onMenuClick:P},null,8,["items"])],512)}}}),Ge=z(Ft,[["__scopeId","data-v-a252f3cb"]]),He=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Z=(()=>{if(typeof document>"u")return!1;const T=He[0],t={};for(const o of He)if((o==null?void 0:o[1])in document){for(const[c,s]of o.entries())t[T[c]]=s;return t}return!1})(),qe={change:Z.fullscreenchange,error:Z.fullscreenerror};let N={request(T=document.documentElement,t){return new Promise((o,u)=>{const c=()=>{N.off("change",c),o()};N.on("change",c);const s=T[Z.requestFullscreen](t);s instanceof Promise&&s.then(c).catch(u)})},exit(){return new Promise((T,t)=>{if(!N.isFullscreen){T();return}const o=()=>{N.off("change",o),T()};N.on("change",o);const u=document[Z.exitFullscreen]();u instanceof Promise&&u.then(o).catch(t)})},toggle(T,t){return N.isFullscreen?N.exit():N.request(T,t)},onchange(T){N.on("change",T)},onerror(T){N.on("error",T)},on(T,t){const o=qe[T];o&&document.addEventListener(o,t,!1)},off(T,t){const o=qe[T];o&&document.removeEventListener(o,t,!1)},raw:Z};Object.defineProperties(N,{isFullscreen:{get:()=>!!document[Z.fullscreenElement]},element:{enumerable:!0,get:()=>document[Z.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[Z.fullscreenEnabled]}});Z||(N={isEnabled:!1});const zt={class:"layout-config-drawer"},Dt={class:"layout-mode-styles-box"},Pt={class:"layout-mode-box-style"},Nt={class:"layout-mode-style-name"},Et={class:"layout-mode-style-name"},Ht={class:"layout-mode-style-name"},qt={class:"layout-mode-style-name"},Ut={class:"layout-config-global"},Ot={class:"layout-config-aside"},Wt={class:"layout-config-aside"},Kt={class:"ba-center"},jt=I({__name:"config",setup(T){const{t}=ve.useI18n(),o=H(),u=q(),c=Xe(),s=(m,n)=>{o.setLayout(n,m)},g=(m,n)=>{if(m===null)return;const b=o.layout[n];o.layout.isDark?b[1]=m:b[0]=m,o.setLayout(n,b)},d=m=>{ne.set(ie,{layoutMode:m,menuCollapse:o.layout.menuCollapse}),o.setLayoutMode(m)},r=(m,n)=>{o.setLayout(n,m);const b=u.state.tabsViewRoutes;u.setTabsViewRoutes([]),Y(()=>{u.setTabsViewRoutes(b)})},v=()=>{o.setLayout("showDrawer",!1)},y=()=>{oe.remove(tt),ne.remove(ie),c.go(0)};return(m,n)=>{const b=p("el-divider"),M=p("el-col"),_=p("el-row"),V=p("el-form-item"),L=p("el-option"),G=p("el-select"),P=p("el-color-picker"),U=p("el-switch"),Q=p("el-input"),te=p("el-button"),h=p("el-popconfirm"),B=p("el-form"),S=p("el-scrollbar"),D=p("el-drawer");return i(),R("div",zt,[l(D,{"model-value":e(o).layout.showDrawer,title:e(t)("layouts.Layout configuration"),size:"310px",onClose:v},{default:a(()=>[l(S,{class:"layout-mode-style-scrollbar"},{default:a(()=>[l(B,{ref:"formRef",model:e(o).layout},{default:a(()=>[f("div",Dt,[l(b,{"border-style":"dashed"},{default:a(()=>[A(w(e(t)("layouts.Layout mode")),1)]),_:1}),f("div",Pt,[l(_,{class:"layout-mode-box-style-row",gutter:10},{default:a(()=>[l(M,{span:12},{default:a(()=>[f("div",{onClick:n[0]||(n[0]=k=>d("Default")),class:E(["layout-mode-style default",e(o).layout.layoutMode=="Default"?"active":""])},[n[21]||(n[21]=f("div",{class:"layout-mode-style-box"},[f("div",{class:"layout-mode-style-aside"}),f("div",{class:"layout-mode-style-container-box"},[f("div",{class:"layout-mode-style-header"}),f("div",{class:"layout-mode-style-container"})])],-1)),f("div",Nt,w(e(t)("layouts.default")),1)],2)]),_:1}),l(M,{span:12},{default:a(()=>[f("div",{onClick:n[1]||(n[1]=k=>d("Classic")),class:E(["layout-mode-style classic",e(o).layout.layoutMode=="Classic"?"active":""])},[n[22]||(n[22]=f("div",{class:"layout-mode-style-box"},[f("div",{class:"layout-mode-style-aside"}),f("div",{class:"layout-mode-style-container-box"},[f("div",{class:"layout-mode-style-header"}),f("div",{class:"layout-mode-style-container"})])],-1)),f("div",Et,w(e(t)("layouts.classic")),1)],2)]),_:1})]),_:1}),l(_,{gutter:10},{default:a(()=>[l(M,{span:12},{default:a(()=>[f("div",{onClick:n[2]||(n[2]=k=>d("Streamline")),class:E(["layout-mode-style streamline",e(o).layout.layoutMode=="Streamline"?"active":""])},[n[23]||(n[23]=f("div",{class:"layout-mode-style-box"},[f("div",{class:"layout-mode-style-container-box"},[f("div",{class:"layout-mode-style-header"}),f("div",{class:"layout-mode-style-container"})])],-1)),f("div",Ht,w(e(t)("layouts.Single column")),1)],2)]),_:1}),l(M,{span:12},{default:a(()=>[f("div",{onClick:n[3]||(n[3]=k=>d("Double")),class:E(["layout-mode-style double",e(o).layout.layoutMode=="Double"?"active":""])},[n[24]||(n[24]=f("div",{class:"layout-mode-style-box"},[f("div",{class:"layout-mode-style-aside"}),f("div",{class:"layout-mode-style-container-box"},[f("div",{class:"layout-mode-style-header"}),f("div",{class:"layout-mode-style-container"})])],-1)),f("div",qt,w(e(t)("layouts.Double column")),1)],2)]),_:1})]),_:1})]),l(b,{"border-style":"dashed"},{default:a(()=>[A(w(e(t)("layouts.overall situation")),1)]),_:1}),f("div",Ut,[l(V,{size:"large",label:e(t)("layouts.Dark mode")},{default:a(()=>[l(_t,{onClick:n[4]||(n[4]=k=>e(ht)())})]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Background page switching animation")},{default:a(()=>[l(G,{onChange:n[5]||(n[5]=k=>s(k,"mainAnimation")),"model-value":e(o).layout.mainAnimation,placeholder:e(t)("layouts.Please select an animation name")},{default:a(()=>[l(L,{label:"slide-right",value:"slide-right"}),l(L,{label:"slide-left",value:"slide-left"}),l(L,{label:"el-fade-in-linear",value:"el-fade-in-linear"}),l(L,{label:"el-fade-in",value:"el-fade-in"}),l(L,{label:"el-zoom-in-center",value:"el-zoom-in-center"}),l(L,{label:"el-zoom-in-top",value:"el-zoom-in-top"}),l(L,{label:"el-zoom-in-bottom",value:"el-zoom-in-bottom"})]),_:1},8,["model-value","placeholder"])]),_:1},8,["label"])]),l(b,{"border-style":"dashed"},{default:a(()=>[A(w(e(t)("layouts.sidebar")),1)]),_:1}),f("div",Ot,[l(V,{label:e(t)("layouts.Side menu bar background color")},{default:a(()=>[l(P,{onChange:n[6]||(n[6]=k=>g(k,"menuBackground")),"model-value":e(o).getColorVal("menuBackground")},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Side menu text color")},{default:a(()=>[l(P,{onChange:n[7]||(n[7]=k=>g(k,"menuColor")),"model-value":e(o).getColorVal("menuColor")},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Side menu active item background color")},{default:a(()=>[l(P,{onChange:n[8]||(n[8]=k=>g(k,"menuActiveBackground")),"model-value":e(o).getColorVal("menuActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Side menu active item text color")},{default:a(()=>[l(P,{onChange:n[9]||(n[9]=k=>g(k,"menuActiveColor")),"model-value":e(o).getColorVal("menuActiveColor")},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Show side menu top bar (logo bar)")},{default:a(()=>[l(U,{onChange:n[10]||(n[10]=k=>s(k,"menuShowTopBar")),"model-value":e(o).layout.menuShowTopBar},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Side menu top bar background color")},{default:a(()=>[l(P,{onChange:n[11]||(n[11]=k=>g(k,"menuTopBarBackground")),"model-value":e(o).getColorVal("menuTopBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Side menu width (when expanded)")},{default:a(()=>[l(Q,{onInput:n[12]||(n[12]=k=>s(k,"menuWidth")),type:"number",step:10,"model-value":e(o).layout.menuWidth},{append:a(()=>n[25]||(n[25]=[A("px")])),_:1},8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Side menu default icon")},{default:a(()=>[l(bt,{onChange:n[13]||(n[13]=k=>r(k,"menuDefaultIcon")),"model-value":e(o).layout.menuDefaultIcon},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Side menu horizontal collapse")},{default:a(()=>[l(U,{onChange:n[14]||(n[14]=k=>s(k,"menuCollapse")),"model-value":e(o).layout.menuCollapse},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Side menu accordion")},{default:a(()=>[l(U,{onChange:n[15]||(n[15]=k=>s(k,"menuUniqueOpened")),"model-value":e(o).layout.menuUniqueOpened},null,8,["model-value"])]),_:1},8,["label"])]),l(b,{"border-style":"dashed"},{default:a(()=>[A(w(e(t)("layouts.Top bar")),1)]),_:1}),f("div",Wt,[l(V,{label:e(t)("layouts.Top bar background color")},{default:a(()=>[l(P,{onChange:n[16]||(n[16]=k=>g(k,"headerBarBackground")),"model-value":e(o).getColorVal("headerBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Top bar text color")},{default:a(()=>[l(P,{onChange:n[17]||(n[17]=k=>g(k,"headerBarTabColor")),"model-value":e(o).getColorVal("headerBarTabColor")},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Background color when hovering over the top bar")},{default:a(()=>[l(P,{onChange:n[18]||(n[18]=k=>g(k,"headerBarHoverBackground")),"model-value":e(o).getColorVal("headerBarHoverBackground")},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Top bar menu active item background color")},{default:a(()=>[l(P,{onChange:n[19]||(n[19]=k=>g(k,"headerBarTabActiveBackground")),"model-value":e(o).getColorVal("headerBarTabActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),l(V,{label:e(t)("layouts.Top bar menu active item text color")},{default:a(()=>[l(P,{onChange:n[20]||(n[20]=k=>g(k,"headerBarTabActiveColor")),"model-value":e(o).getColorVal("headerBarTabActiveColor")},null,8,["model-value"])]),_:1},8,["label"])]),l(h,{onConfirm:y,title:e(t)("layouts.Are you sure you want to restore all configurations to the default values?")},{reference:a(()=>[f("div",Kt,[l(te,{class:"w80",type:"info"},{default:a(()=>[A(w(e(t)("layouts.Restore default")),1)]),_:1})])]),_:1},8,["title"])])]),_:1},8,["model"])]),_:1})]),_:1},8,["model-value","title"])])}}}),Xt=z(jt,[["__scopeId","data-v-64de73d3"]]),Yt={class:"command"},Jt={class:"task-opt"},Zt=["onClick"],Gt={class:"terminal-buttons"},Qt={class:"config-buttons"},eo=I({__name:"index",setup(T){const{t}=ve.useI18n(),o=Be(),u=pe(),c=K({registryLoading:!1,registryLoadingType:"npm",packageManagerLoading:!1}),s=m=>{let n=t("terminal.unknown"),b="info";switch(m){case F.Waiting:n=t("terminal.Waiting for execution"),b="info";break;case F.Connecting:n=t("terminal.Connecting"),b="warning";break;case F.Executing:n=t("terminal.Executing"),b="warning";break;case F.Success:n=t("terminal.Successful execution"),b="success";break;case F.Failed:n=t("terminal.Execution failed"),b="danger";break;case F.Unknown:n=t("terminal.Unknown execution result"),b="danger";break}return{statusText:n,statusType:b}},g=(m,n,b=!0,M="",_=()=>{})=>{n?o.addTaskPM(m,b,M,_):o.addTask(m,b,M,_),Y(()=>{u.value&&u.value.wrapRef&&u.value.setScrollTop(u.value.wrapRef.scrollHeight)})},d=()=>{Pe.confirm(t("terminal.Are you sure you want to republish?"),t("Reminder"),{confirmButtonText:t("Confirm"),cancelButtonText:t("Cancel"),type:"warning"}).then(()=>{g("web-build",!0,!0,"",()=>{})})},r=m=>{c.packageManagerLoading=!0,ot({manager:m}).then(n=>{n.code==1&&o.changePackageManager(m)}).finally(()=>{c.packageManagerLoading=!1})},v=(m,n)=>{const b=n=="npm"?o.state.npmRegistry:o.state.composerRegistry;o.changeRegistry(m,n),c.registryLoading=!0,c.registryLoadingType=n,o.addTask(`set-${n}-registry.${m}`,!1,"",M=>{c.registryLoading=!1,(M==F.Failed||M==F.Unknown)&&Pe.confirm(t("terminal.Failed to modify the source command, Please try again manually"),t("Reminder"),{confirmButtonText:t("Confirm"),showCancelButton:!1,type:"warning"}).then(()=>{o.changeRegistry(b,n)})})},y=m=>{let n={};return m=="npm"?n={npm:"npm",taobao:"taobao",tencent:"tencent"}:m=="composer"&&(n={composer:"composer",huawei:"huawei",aliyun:"aliyun",tencent:"tencent",kkame:"kkame"}),o.state[m=="npm"?"npmRegistry":"composerRegistry"]=="unknown"&&(n.unknown=t("Unknown")),n};return J(()=>{o.init()}),(m,n)=>{const b=p("el-alert"),M=p("el-tag"),_=p("el-button"),V=p("Icon"),L=p("el-card"),G=p("el-timeline-item"),P=p("el-timeline"),U=p("el-empty"),Q=p("el-dropdown-item"),te=p("el-dropdown-menu"),h=p("el-dropdown"),B=p("el-dialog"),S=p("el-form"),D=De("blur"),k=De("loading");return i(),R("div",null,[l(B,{modelValue:e(o).state.show,"onUpdate:modelValue":n[6]||(n[6]=C=>e(o).state.show=C),title:e(t)("terminal.Terminal"),class:"ba-terminal-dialog main-dialog"},{default:a(()=>[l(e(it),{ref_key:"terminalScrollbarRef",ref:u,"max-height":500,class:"terminal-scrollbar"},{default:a(()=>[e(o).state.phpDevelopmentServer?$("",!0):(i(),x(b,{key:0,class:"terminal-warning-alert",title:e(t)("terminal.The current terminal is not running under the installation service, and some commands may not be executed"),type:"error"},null,8,["title"])),e(o).state.taskList.length?(i(),x(P,{key:1,class:"terminal-timeline"},{default:a(()=>[(i(!0),R(W,null,se(e(o).state.taskList,(C,de)=>(i(),x(G,{key:de,class:E(["task-item","task-status-"+C.status]),type:s(C.status).statusType,center:"",timestamp:C.createTime,placement:"top"},{default:a(()=>[l(L,null,{default:a(()=>[f("div",null,[l(M,{type:s(C.status).statusType},{default:a(()=>[A(w(s(C.status).statusText),1)]),_:2},1032,["type"]),(C.status==e(F).Failed||C.status==e(F).Unknown)&&C.blockOnFailure?(i(),x(M,{key:0,class:"block-on-failure-tag",type:"warning"},{default:a(()=>[A(w(e(t)("terminal.Failure to execute this command will block the execution of the queue")),1)]),_:1})):$("",!0),C.status==e(F).Executing||C.status==e(F).Connecting?(i(),x(M,{key:1,class:"block-on-failure-tag",type:"danger"},{default:a(()=>[A(w(e(t)("terminal.Do not refresh the browser")),1)]),_:1})):$("",!0),f("span",Yt,w(C.command),1),f("div",Jt,[C.status==e(F).Failed||C.status==e(F).Unknown?O((i(),x(_,{key:0,title:e(t)("Retry"),size:"small",type:"warning",icon:"el-icon-RefreshRight",circle:"",onClick:me=>e(o).retryTask(de)},null,8,["title","onClick"])),[[D]]):$("",!0),O(l(_,{onClick:me=>e(o).delTask(de),title:e(t)("Delete"),size:"small",type:"danger",icon:"el-icon-Delete",circle:""},null,8,["onClick","title"]),[[D]])])]),C.status!=e(F).Waiting?(i(),R(W,{key:0},[C.status!=e(F).Connecting&&C.status!=e(F).Executing?(i(),R("div",{key:0,onClick:me=>e(o).setTaskShowMessage(de),class:"toggle-message-display"},[f("span",null,w(e(t)("terminal.Command run log")),1),l(V,{name:C.showMessage?"el-icon-ArrowUp":"el-icon-ArrowDown",size:"16",color:"#909399"},null,8,["name"])],8,Zt)):$("",!0),C.status==e(F).Connecting||C.status==e(F).Executing||C.status>e(F).Executing&&C.showMessage?(i(),R("div",{key:1,class:E(["exec-message","exec-message-"+C.uuid])},[(i(!0),R(W,null,se(C.message,(me,Qe)=>(i(),R("pre",{key:Qe,class:"message-item"},w(me),1))),128))],2)):$("",!0)],64)):$("",!0)]),_:2},1024)]),_:2},1032,["class","type","timestamp"]))),128))]),_:1})):(i(),x(U,{key:2,"image-size":80,description:e(t)("terminal.No mission yet")},null,8,["description"]))]),_:1},512),f("div",Gt,[O((i(),x(_,{class:"terminal-menu-item",icon:"el-icon-MagicStick",onClick:n[0]||(n[0]=C=>g("test",!0,!1))},{default:a(()=>[A(w(e(t)("terminal.Test command")),1)]),_:1})),[[D]]),l(h,{class:"terminal-menu-item"},{dropdown:a(()=>[l(te,null,{default:a(()=>[e(o).state.packageManager!="none"?(i(),x(Q,{key:0,onClick:n[1]||(n[1]=C=>g("web-install",!0))},{default:a(()=>[A(w(e(o).state.packageManager)+" run install ",1)]),_:1})):$("",!0),l(Q,{onClick:n[2]||(n[2]=C=>g("composer.update",!1))},{default:a(()=>n[9]||(n[9]=[A("composer update")])),_:1})]),_:1})]),default:a(()=>[O((i(),x(_,{icon:"el-icon-Download"},{default:a(()=>[A(w(e(t)("terminal.Install dependent packages")),1)]),_:1})),[[D]])]),_:1}),O((i(),x(_,{class:"terminal-menu-item",icon:"el-icon-Sell",onClick:n[3]||(n[3]=C=>d())},{default:a(()=>[A(w(e(t)("terminal.Republish")),1)]),_:1})),[[D]]),O((i(),x(_,{class:"terminal-menu-item",icon:"el-icon-Delete",onClick:n[4]||(n[4]=C=>e(o).clearSuccessTask())},{default:a(()=>[A(w(e(t)("terminal.Clean up task list")),1)]),_:1})),[[D]]),O((i(),x(_,{class:"terminal-menu-item",icon:"el-icon-Tools",onClick:n[5]||(n[5]=C=>e(o).toggleConfigDialog())},{default:a(()=>[A(w(e(t)("terminal.Terminal settings")),1)]),_:1})),[[D]])])]),_:1},8,["modelValue","title"]),l(B,{onClose:n[8]||(n[8]=C=>e(o).toggleConfigDialog(!1)),"model-value":e(o).state.showConfig,class:"ba-terminal-dialog",title:e(t)("terminal.Terminal settings")},{default:a(()=>[l(S,{"label-position":"left","label-width":"140"},{default:a(()=>[O((i(),x(fe,{label:"NPM "+e(t)("terminal.Source"),"model-value":e(o).state.npmRegistry,key:e(o).state.npmRegistry,type:"select","input-attr":{border:!0,content:y("npm"),teleported:!1,onChange:C=>v(C,"npm")}},null,8,["label","model-value","input-attr"])),[[k,c.registryLoading&&c.registryLoadingType=="npm"]]),O((i(),x(fe,{label:"Composer "+e(t)("terminal.Source"),"model-value":e(o).state.composerRegistry,key:e(o).state.composerRegistry,type:"select","input-attr":{border:!0,content:y("composer"),teleported:!1,onChange:C=>v(C,"composer")}},null,8,["label","model-value","input-attr"])),[[k,c.registryLoading&&c.registryLoadingType=="composer"]]),O(l(fe,{label:e(t)("terminal.NPM package manager"),"model-value":e(o).state.packageManager,type:"select","input-attr":{border:!0,content:{npm:"NPM",cnpm:"CNPM",pnpm:"PNPM",yarn:"YARN",ni:"NI",none:e(t)("terminal.Manual execution")},teleported:!1,onChange:C=>r(C)},tip:e(t)("terminal.NPM package manager tip")},null,8,["label","model-value","input-attr","tip"]),[[k,c.packageManagerLoading]]),l(fe,{label:e(t)("terminal.Clear successful task"),"model-value":e(o).state.automaticCleanupTask,type:"radio","input-attr":{border:!0,content:{0:e(t)("Disable"),1:e(t)("Enable")},onChange:e(o).changeAutomaticCleanupTask},tip:e(t)("terminal.Clear successful task tip")},null,8,["label","model-value","input-attr","tip"])]),_:1}),f("div",Qt,[l(_,{onClick:n[7]||(n[7]=C=>e(o).toggleConfigDialog(!1))},{default:a(()=>[A(w(e(t)("terminal.Back to terminal")),1)]),_:1})])]),_:1},8,["model-value","title"])])}}}),to=z(eo,[["__scopeId","data-v-3d8b491f"]]),oo={class:"el-popover__title"},lo={class:"reload-hot-server-content"},no={class:"reload-hot-server-buttons"},ao={class:"nav-menu-item"},so={class:"admin-name"},ro={class:"admin-info-base"},uo={class:"admin-info-other"},io={class:"admin-info-name"},co={class:"admin-info-lasttime"},mo={class:"admin-info-footer"},fo=I({__name:"navMenus",setup(T){j(M=>({"3a12e92a":e(u).getColorVal("headerBarBackground"),"91d0aeea":e(u).getColorVal("headerBarTabColor"),"06911d9b":e(u).getColorVal("headerBarHoverBackground")}));const{t}=ve.useI18n(),o=Oe(),u=H(),c=Be(),s=Te(),g=pe(),d=K({isFullScreen:!1,currentNavMenu:"",showLayoutDrawer:!1,showAdminInfoPopover:!1}),r=(M,_)=>{d.currentNavMenu=M?_:""},v=M=>{var _;M=="cancel"&&((_=g.value)==null||_.hide())},y=()=>{if(!N.isEnabled)return ct.warning(t("layouts.Full screen is not supported")),!1;N.toggle(),N.onchange(()=>{d.isFullScreen=N.isFullscreen})},m=()=>{d.showAdminInfoPopover=!1,_e({name:"routine/adminInfo"})},n=()=>{Ct().then(()=>{oe.remove(we),We.go(0)})},b=M=>{if(M=="storage"||M=="all"){const _=oe.get(we),V=oe.get(Fe);if(ne.clear(),oe.clear(),oe.set(we,_),oe.set(Fe,V),M=="storage")return}lt(M).then(()=>{})};return(M,_)=>{const V=p("el-button"),L=p("Icon"),G=p("el-popover"),P=p("router-link"),U=p("el-dropdown-item"),Q=p("el-dropdown-menu"),te=p("el-dropdown"),h=p("el-badge"),B=p("el-avatar");return i(),R("div",{class:E(["nav-menus",e(u).layout.layoutMode])},[e(Ie).dirtyFile?(i(),x(G,{key:0,ref_key:"reloadHotServerPopover",ref:g,onShow:_[2]||(_[2]=S=>r(!0,"reloadHotServer")),onHide:_[3]||(_[3]=S=>r(!1,"reloadHotServer")),width:360},{reference:a(()=>[f("div",{class:E(["nav-menu-item",d.currentNavMenu=="reloadHotServer"?"hover":""])},[l(L,{color:"var(--el-color-danger)",class:"nav-menu-icon",name:"el-icon-Warning",size:"18"})],2)]),default:a(()=>[f("div",null,[f("div",oo,w(e(t)("vite.Reload hot server title")),1),f("div",lo,[f("p",null,[f("span",null,w(e(t)("vite.Reload hot server tips 1")),1),f("span",null,"【"+w(e(t)(`vite.Close type ${e(Ie).closeType}`))+"】",1),f("span",null,w(e(t)("vite.Reload hot server tips 2")),1)]),f("p",null,w(e(t)("vite.Reload hot server tips 3")),1),f("div",no,[l(V,{onClick:_[0]||(_[0]=S=>v("cancel"))},{default:a(()=>[A(w(e(t)("vite.Later")),1)]),_:1}),l(V,{onClick:_[1]||(_[1]=S=>v("reload")),type:"primary"},{default:a(()=>[A(w(e(t)("vite.Restart hot update")),1)]),_:1})])])])]),_:1},512)):$("",!0),l(P,{class:"h100",target:"_blank",title:e(t)("Home"),to:"/"},{default:a(()=>[f("div",ao,[l(L,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Monitor",size:"18"},null,8,["color"])])]),_:1},8,["title"]),l(te,{onVisibleChange:_[4]||(_[4]=S=>r(S,"lang")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:a(()=>[l(Q,{class:"dropdown-menu-box"},{default:a(()=>[(i(!0),R(W,null,se(e(u).lang.langArray,S=>(i(),x(U,{key:S.name,onClick:D=>e(nt)(S.name)},{default:a(()=>[A(w(S.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:a(()=>[f("div",{class:E(["nav-menu-item pt2",d.currentNavMenu=="lang"?"hover":""])},[l(L,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-lang",size:"18"},null,8,["color"])],2)]),_:1}),f("div",{onClick:y,class:E(["nav-menu-item",d.isFullScreen?"hover":""])},[d.isFullScreen?(i(),x(L,{key:0,color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-full-screen-cancel",size:"18"},null,8,["color"])):(i(),x(L,{key:1,color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-FullScreen",size:"18"},null,8,["color"]))],2),e(o).super?(i(),R("div",{key:1,onClick:_[5]||(_[5]=S=>e(c).toggle()),class:"nav-menu-item pt2"},[l(h,{"is-dot":e(c).state.showDot},{default:a(()=>[l(L,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-terminal",size:"26"},null,8,["color"])]),_:1},8,["is-dot"])])):$("",!0),e(o).super?(i(),x(te,{key:2,onVisibleChange:_[9]||(_[9]=S=>r(S,"clear")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:a(()=>[l(Q,{class:"dropdown-menu-box"},{default:a(()=>[l(U,{onClick:_[6]||(_[6]=S=>b("tp"))},{default:a(()=>[A(w(e(t)("utils.Clean up system cache")),1)]),_:1}),l(U,{onClick:_[7]||(_[7]=S=>b("storage"))},{default:a(()=>[A(w(e(t)("utils.Clean up browser cache")),1)]),_:1}),l(U,{onClick:_[8]||(_[8]=S=>b("all")),divided:""},{default:a(()=>[A(w(e(t)("utils.Clean up all cache")),1)]),_:1})]),_:1})]),default:a(()=>[f("div",{class:E(["nav-menu-item",d.currentNavMenu=="clear"?"hover":""])},[l(L,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Delete",size:"18"},null,8,["color"])],2)]),_:1})):$("",!0),e(s).userInitialize?(i(),x(G,{key:3,onShow:_[10]||(_[10]=S=>r(!0,"adminInfo")),onHide:_[11]||(_[11]=S=>r(!1,"adminInfo")),placement:"bottom-end","hide-after":0,width:260,trigger:"click","popper-class":"admin-info-box",visible:d.showAdminInfoPopover,"onUpdate:visible":_[12]||(_[12]=S=>d.showAdminInfoPopover=S)},{reference:a(()=>[f("div",{class:E(["admin-info",d.currentNavMenu=="adminInfo"?"hover":""])},[l(B,{size:25,src:e(Le)(e(o).avatar)},null,8,["src"]),f("div",so,w(e(o).nickname),1)],2)]),default:a(()=>[f("div",null,[f("div",ro,[l(B,{size:70,src:e(Le)(e(o).avatar)},null,8,["src"]),f("div",uo,[f("div",io,w(e(o).nickname),1),f("div",co,w(e(o).last_login_time),1)])]),f("div",mo,[l(V,{onClick:m,type:"primary",plain:""},{default:a(()=>[A(w(e(t)("layouts.Profile")),1)]),_:1}),l(V,{onClick:n,type:"danger",plain:""},{default:a(()=>[A(w(e(t)("layouts.Logout")),1)]),_:1})])])]),_:1},8,["visible"])):$("",!0),f("div",{onClick:_[13]||(_[13]=S=>e(u).setLayout("showDrawer",!0)),class:"nav-menu-item"},[l(L,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"fa fa-cogs",size:"18"},null,8,["color"])]),l(Xt),l(to)],2)}}}),be=z(fo,[["__scopeId","data-v-dbdf8342"]]),po={class:"nav-bar"},_o=I({__name:"default",setup(T){j(o=>({"67abd059":e(t).getColorVal("headerBarTabColor"),f0bff19a:e(t).getColorVal("headerBarTabActiveColor"),"00d66b4c":e(t).getColorVal("headerBarTabActiveBackground")}));const t=H();return(o,u)=>(i(),R("div",po,[l(Ge,{ref_key:"layoutNavTabsRef",ref:Ke},null,512),l(be)]))}}),vo=z(_o,[["__scopeId","data-v-528ceb49"]]),yo={class:"nav-bar"},go={key:0,class:"unfold"},bo=I({__name:"classic",setup(T){j(u=>({"737cd666":e(t).getColorVal("headerBarBackground"),"0af9a26d":e(t).getColorVal("headerBarTabColor"),"88760b72":e(t).getColorVal("headerBarTabActiveColor"),"7cfea179":e(t).getColorVal("headerBarHoverBackground"),e21b7690:e(t).getColorVal("headerBarTabActiveBackground")}));const t=H(),o=()=>{yt("ba-aside-menu-shade",()=>{t.setLayout("menuCollapse",!0)}),t.setLayout("menuCollapse",!1)};return(u,c)=>{const s=p("Icon");return i(),R("div",yo,[e(t).layout.shrink&&e(t).layout.menuCollapse?(i(),R("div",go,[l(s,{onClick:o,name:"fa fa-indent",color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["color"])])):$("",!0),e(t).layout.shrink?$("",!0):(i(),x(Ge,{key:1,ref_key:"layoutNavTabsRef",ref:Ke},null,512)),l(be)])}}}),ho=z(bo,[["__scopeId","data-v-952ef580"]]),Co={class:"layouts-menu-horizontal"},ko={key:0,class:"menu-horizontal-logo"},wo=I({__name:"menuHorizontal",setup(T){j(d=>({"4dc345d5":e(t).getColorVal("headerBarHoverBackground"),"4bf8e79e":e(t).getColorVal("menuBackground"),"13719fa1":e(t).getColorVal("menuColor"),d3617f0a:e(t).getColorVal("menuActiveColor"),f2c081f8:e(t).getColorVal("menuActiveBackground")}));const t=H(),o=q(),u=le(),c=K({defaultActive:""}),s=d=>{const r=o.getTabsViewDataByRoute(d);r&&(c.defaultActive=ee(r,r.meta.matched))},g=()=>{Y(()=>{var r;let d=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!d)return!1;(r=X.value)==null||r.setScrollTop(d.offsetTop)})};return J(()=>{s(u),g(),new Se(X.value.wrapRef)}),ce(d=>{s(d)}),(d,r)=>{const v=p("el-menu"),y=p("el-scrollbar");return i(),R("div",Co,[e(t).layout.menuShowTopBar?(i(),R("div",ko,[l(Je)])):$("",!0),l(y,{ref_key:"layoutMenuScrollbarRef",ref:X,class:"horizontal-menus-scrollbar"},{default:a(()=>[l(v,{ref_key:"layoutMenuRef",ref:ye,class:"menu-horizontal",mode:"horizontal","default-active":c.defaultActive},{default:a(()=>[l(ge,{extends:{position:"horizontal",level:1},menus:e(o).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["default-active"])]),_:1},512),l(be)])}}}),xo=z(wo,[["__scopeId","data-v-851fe78f"]]),To={class:"layouts-menu-horizontal-double"},So=I({__name:"double",setup(T){j(d=>({"20aa761e":e(t).getColorVal("menuBackground"),"04a10121":e(t).getColorVal("menuColor"),"57cf81fb":e(t).getColorVal("menuActiveColor"),"7a8c6d84":e(t).getColorVal("menuActiveBackground")}));const t=H(),o=q(),u=le(),c=K({defaultActive:""}),s=d=>{const r=o.getTabsViewDataByRoute(d);r&&(c.defaultActive=ee(r,r.meta.matched))},g=()=>{Y(()=>{var r;let d=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!d)return!1;(r=X.value)==null||r.setScrollTop(d.offsetTop)})};return J(()=>{s(u),g()}),ce(d=>{s(d)}),(d,r)=>{const v=p("el-menu"),y=p("el-scrollbar");return i(),R("div",To,[l(y,{ref_key:"layoutMenuScrollbarRef",ref:X,class:"double-menus-scrollbar"},{default:a(()=>[l(v,{ref_key:"layoutMenuRef",ref:ye,class:"menu-horizontal",mode:"horizontal","default-active":c.defaultActive},{default:a(()=>[l(ge,{extends:{position:"horizontal",level:1},menus:e(o).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["default-active"])]),_:1},512),l(be)])}}}),Bo=z(So,[["__scopeId","data-v-2e8c780c"]]),Mo=I({name:"layout/header",components:{DefaultNavBar:vo,ClassicNavBar:ho,StreamlineNavBar:xo,DoubleNavBar:Bo},__name:"header",setup(T){const t=H(),o=q();return(u,c)=>{const s=p("el-header");return e(o).state.tabFullScreen?$("",!0):(i(),x(s,{key:0,class:"layout-header"},{default:a(()=>[(i(),x(Ve(e(t).layout.layoutMode+"NavBar")))]),_:1}))}}}),he=z(Mo,[["__scopeId","data-v-9014eea9"]]),Ro=I({name:"layout/main",__name:"main",setup(T){const{proxy:t}=Ze(),o=le(),u=H(),c=q(),s=K({componentKey:o.fullPath,keepAliveComponentNameList:[]}),g=function(r){if(r){if(s.keepAliveComponentNameList.find(y=>y===r))return;s.keepAliveComponentNameList.push(r)}},d=()=>{var r;if(c.state.activeRoute){const v=c.getTabsViewDataByRoute(c.state.activeRoute);v&&typeof((r=v.meta)==null?void 0:r.keepalive)=="string"&&g(v.meta.keepalive)}};return Ye(()=>{t.eventBus.on("onTabViewRefresh",r=>{s.keepAliveComponentNameList=s.keepAliveComponentNameList.filter(v=>r.meta.keepalive!==v),s.componentKey="",Y(()=>{s.componentKey=r.fullPath,g(r.meta.keepalive)})}),t.eventBus.on("onTabViewClose",r=>{s.keepAliveComponentNameList=s.keepAliveComponentNameList.filter(v=>r.meta.keepalive!==v)})}),dt(()=>{t.eventBus.off("onTabViewRefresh"),t.eventBus.off("onTabViewClose")}),J(()=>{d()}),mt(()=>o.fullPath,()=>{s.componentKey=o.fullPath,d()}),(r,v)=>{const y=p("router-view"),m=p("el-scrollbar"),n=p("el-main");return i(),x(n,{class:"layout-main"},{default:a(()=>[l(m,{class:"layout-main-scrollbar",style:ae(e(st)),ref_key:"layoutMainScrollbarRef",ref:at},{default:a(()=>[l(y,null,{default:a(({Component:b})=>[l(Re,{name:e(u).layout.mainAnimation,mode:"out-in"},{default:a(()=>[(i(),x(ft,{include:s.keepAliveComponentNameList},[(i(),x(Ve(b),{key:s.componentKey}))],1032,["include"]))]),_:2},1032,["name"])]),_:1})]),_:1},8,["style"])]),_:1})}}}),Ce=z(Ro,[["__scopeId","data-v-93dd102f"]]),Vo=["title"],$o=I({__name:"closeFullScreen",setup(T){const t=q(),o=K({closeBoxTop:20});J(()=>{setTimeout(()=>{o.closeBoxTop=-30},300)});const u=()=>{o.closeBoxTop=20},c=()=>{o.closeBoxTop=-30},s=()=>{t.setFullScreen(!1)};return(g,d)=>{const r=p("Icon");return i(),R("div",{title:g.$t("layouts.Exit full screen"),onMouseover:ue(u,["stop"]),onMouseout:ue(c,["stop"])},[f("div",{onClick:ue(s,["stop"]),class:"close-full-screen",style:ae({top:o.closeBoxTop+"px"})},[l(r,{name:"el-icon-Close"})],4),d[0]||(d[0]=f("div",{class:"close-full-screen-on"},null,-1))],40,Vo)}}}),ke=z($o,[["__scopeId","data-v-0aa634f1"]]),Ao=I({__name:"default",setup(T){const t=q();return(o,u)=>{const c=p("el-container");return i(),R(W,null,[l(c,{class:"layout-container"},{default:a(()=>[l(Ae),l(c,{class:"content-wrapper"},{default:a(()=>[l(he),l(Ce)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),x(ke,{key:0})):$("",!0)],64)}}}),Io=z(Ao,[["__scopeId","data-v-59d252c1"]]),Lo=I({__name:"classic",setup(T){const t=q();return(o,u)=>{const c=p("el-container");return i(),R(W,null,[l(c,{class:"layout-container"},{default:a(()=>[l(Ae),l(c,{class:"content-wrapper"},{default:a(()=>[l(he),l(Ce)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),x(ke,{key:0})):$("",!0)],64)}}}),Fo=z(Lo,[["__scopeId","data-v-fb349671"]]),zo=I({__name:"streamline",setup(T){const t=q();return(o,u)=>{const c=p("el-container");return i(),R(W,null,[l(c,{class:"layout-container"},{default:a(()=>[l(c,{class:"content-wrapper"},{default:a(()=>[l(he),l(Ce)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),x(ke,{key:0})):$("",!0)],64)}}}),Do=z(zo,[["__scopeId","data-v-fcdc1bd3"]]),Po=I({__name:"double",setup(T){const t=q();return(o,u)=>{const c=p("el-container");return i(),R(W,null,[l(c,{class:"layout-container"},{default:a(()=>[l(Ae),l(c,{class:"content-wrapper"},{default:a(()=>[l(he),l(Ce)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),x(ke,{key:0})):$("",!0)],64)}}}),No=z(Po,[["__scopeId","data-v-d08319bd"]]),Jo=I({components:{Default:Io,Classic:Fo,Streamline:Do,Double:No},__name:"index",setup(T){const t=Be(),o=q(),u=H(),c=le(),s=Te(),g=Oe(),d=K({autoMenuCollapseLock:!1});J(()=>{if(!g.token)return We.push({name:"adminLogin"});r(),xe(),re(window,"resize",xe)}),Ye(()=>{v(),re(window,"resize",v)});const r=()=>{kt().then(y=>{if(s.dataFill(y.data.siteConfig),t.changePackageManager(y.data.terminal.npmPackageManager),t.changePHPDevelopmentServer(y.data.terminal.phpDevelopmentServer),s.setInitialize(!0),Ne(y.data.adminInfo)||(g.dataFill(y.data.adminInfo),s.setUserInitialize(!0)),y.data.menus){if(gt(y.data.menus),c.params.to){const n=JSON.parse(c.params.to);if(n.path!=Ue){let b=Ne(n.query)?{}:n.query;_e({path:n.path,query:b});return}}let m=$e(o.state.tabsViewRoutes);m&&_e(m.path)}})},v=()=>{let y={layoutMode:u.layout.layoutMode,menuCollapse:u.layout.menuCollapse},m=ne.get(ie);if(m||ne.set(ie,y),document.body.clientWidth<1024)d.autoMenuCollapseLock||(d.autoMenuCollapseLock=!0,u.setLayout("menuCollapse",!0)),u.setLayout("shrink",!0),u.setLayoutMode("Classic");else{d.autoMenuCollapseLock=!1;let b=m||y;u.setLayout("menuCollapse",b.menuCollapse),u.setLayout("shrink",!1),u.setLayoutMode(b.layoutMode)}};return(y,m)=>(i(),x(Ve(e(u).layout.layoutMode)))}});export{Jo as default};
