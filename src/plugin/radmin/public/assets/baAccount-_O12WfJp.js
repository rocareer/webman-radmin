import{e as S,p as E,a as A,m as c,Y as C,h as v,o as m,l as t,O as n,Z as w,s as o,k as r,U as u,N as z,V as f,a6 as G}from"./vue-DTj65VEW.js";import{F as U}from"./index-Cxc02btj.js";import{b as _}from"./validate-CF98adGt.js";import{x as K,y as $,_ as L}from"./index-D_nuE6M8.js";import{u as M}from"./index-BwvoFoZH.js";import{s as g}from"./store-BQ3slDKj.js";import"./index-WSi79vNW.js";import"./index-CGti_7Vw.js";const O={key:0,class:"userinfo"},j={class:"user-avatar-box"},T=["src"],Y={class:"username"},Z={class:"user-integral"},H={class:"userinfo-buttons"},J={key:1,class:"ba-login"},Q={class:"ba-title"},W=["src"],X={target:"_blank",class:"ba-account-register",href:"https://uni.buildadmin.com/user/login?type=register",rel:"noopener noreferrer"},ee=S({__name:"baAccount",setup(oe){const{t:s}=K.useI18n(),i=M(),b=E(),a=A({loading:!1,form:{tab:"login",username:"",password:"",captcha:"",captchaId:$(),keep:!1}}),B=A({username:[_({name:"required",title:s("module.User name")})],captcha:[_({name:"required",title:s("module.Verification Code")})],password:[_({name:"required",title:s("module.Password")}),_({name:"password"})]}),F=d=>{window.open(d)},y=()=>{b.value&&b.value.validate(d=>{d?(a.loading=!0,checkIn("post",a.form).then(e=>{g.dialog.baAccount=!1,a.loading=!1,i.dataFill(e.data.userInfo)}).catch(()=>{a.loading=!1,h()})):h()})},h=()=>{a.form.captcha="",a.form.captchaId=$()};return(d,e)=>{const x=c("Icon"),p=c("el-button"),D=c("el-input"),V=c("el-col"),N=c("el-row"),k=c("el-form-item"),P=c("el-form"),R=c("el-dialog"),I=C("blur"),q=C("loading");return m(),v("div",null,[t(R,{modelValue:o(g).dialog.baAccount,"onUpdate:modelValue":e[7]||(e[7]=l=>o(g).dialog.baAccount=l),class:"ba-account-dialog",width:"25%",title:o(s)("module.Member information")},{default:n(()=>[o(i).token?w((m(),v("div",O,[r("div",j,[r("img",{class:"user-avatar",src:o(i).avatar,alt:""},null,8,T),t(x,{class:"user-avatar-gender",name:o(i).getGenderIcon().name,size:"14",color:o(i).getGenderIcon().color},null,8,["name","color"])]),r("p",Y,u(o(i).nickname),1),r("p",Z,[r("span",null,u(d.$t("module.Integral")+" "+o(i).score),1),r("span",null,u(d.$t("module.Balance")+" "+o(i).money),1)]),r("div",H,[w((m(),z(p,{onClick:e[0]||(e[0]=l=>F("https://uni.buildadmin.com/user/account/moduleOrders")),size:"default",type:"primary"},{default:n(()=>[f(u(d.$t("module.My module")),1)]),_:1})),[[I]]),w((m(),z(p,{onClick:e[1]||(e[1]=l=>o(i).logout()),size:"default",type:"warning"},{default:n(()=>[f(u(d.$t("module.Logout login")),1)]),_:1})),[[I]])])])),[[q,o(g).loading.common]]):(m(),v("div",J,[r("h3",Q,u(o(s)("module.Log in to the buildadmin module marketplace")),1),t(P,{onKeyup:e[6]||(e[6]=G(l=>y(),["enter"])),ref_key:"baAccountFormRef",ref:b,rules:B,class:"ba-account-login-form",model:a.form},{default:n(()=>[t(U,{modelValue:a.form.username,"onUpdate:modelValue":e[2]||(e[2]=l=>a.form.username=l),type:"string",prop:"username",placeholder:o(s)("module.Please enter buildadmin account name or email"),"input-attr":{size:"large"}},null,8,["modelValue","placeholder"]),t(U,{modelValue:a.form.password,"onUpdate:modelValue":e[3]||(e[3]=l=>a.form.password=l),type:"password",prop:"password",placeholder:o(s)("module.Please enter the buildadmin account password"),"input-attr":{size:"large"}},null,8,["modelValue","placeholder"]),t(k,{prop:"captcha"},{default:n(()=>[t(N,{class:"w100"},{default:n(()=>[t(V,{span:16},{default:n(()=>[t(D,{modelValue:a.form.captcha,"onUpdate:modelValue":e[4]||(e[4]=l=>a.form.captcha=l),size:"large",clearable:"",autocomplete:"off",placeholder:o(s)("module.Please enter the login verification code")},null,8,["modelValue","placeholder"])]),_:1}),t(V,{class:"captcha-box",span:8},{default:n(()=>[r("img",{onClick:h,class:"captcha-img",src:d.buildCaptchaUrl()+"&id="+a.form.captchaId},null,8,W)]),_:1})]),_:1})]),_:1}),t(k,{class:"form-buttons"},{default:n(()=>[t(p,{onClick:e[5]||(e[5]=l=>y()),loading:a.loading,round:"",type:"primary",size:"large"},{default:n(()=>[f(u(o(s)("module.Sign in")),1)]),_:1},8,["loading"]),r("a",X,[t(p,{round:"",plain:"",type:"info",size:"large"},{default:n(()=>[f(u(o(s)("module.Register")),1)]),_:1})])]),_:1})]),_:1},8,["rules","model"])]))]),_:1},8,["modelValue","title"])])}}}),ce=L(ee,[["__scopeId","data-v-1354439c"]]);export{ce as default};
